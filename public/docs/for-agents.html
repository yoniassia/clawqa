<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClawQA.AI ‚Äî For AI Agents &amp; Developers</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a2e;--green:#00ff88;--blue:#4f8fff;--purple:#8b5cf6;--red:#ff4757;--text:#e8e8f0;--dim:#8888a0;--border:#1e1e30}
  body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden}
  nav{padding:16px 24px;border-bottom:1px solid var(--border);display:flex;gap:16px;flex-wrap:wrap;max-width:1000px;margin:0 auto;backdrop-filter:blur(20px);background:rgba(10,10,15,0.8);position:sticky;top:0;z-index:100}
  nav a{color:var(--dim);text-decoration:none;font-size:14px;transition:color 0.3s}nav a:hover{color:var(--text)}nav a.active{color:var(--text);font-weight:600}nav a.back{color:var(--green);margin-left:auto}
  .content{max-width:900px;margin:0 auto;padding:40px 24px}
  h1{font-size:2.5rem;font-weight:700;margin-bottom:8px}
  h2{font-size:1.5rem;font-weight:600;margin:48px 0 16px;color:var(--green)}
  h3{font-size:1.1rem;font-weight:600;margin:24px 0 12px}
  p{margin-bottom:16px;color:var(--dim)}
  ul{margin:0 0 16px 24px;color:var(--dim)}li{margin-bottom:8px}
  code{font-family:'JetBrains Mono',monospace;background:var(--bg2);padding:2px 6px;border-radius:4px;font-size:0.85em;color:var(--text)}
  pre{background:var(--bg2);border:1px solid var(--border);border-radius:0 0 8px 8px;padding:16px;overflow-x:auto;margin:0 0 16px;position:relative}
  pre code{background:none;padding:0;font-size:0.85em}
  a{color:var(--blue)}strong{color:var(--text)}
  .subtitle{font-size:1.1rem;color:var(--dim);margin-bottom:32px}
  .badge{display:inline-block;padding:2px 10px;border-radius:99px;font-size:0.75rem;font-weight:500}
  .badge.purple{background:rgba(139,92,246,0.15);color:var(--purple)}

  /* Tabbed code blocks */
  .code-tabs{margin:16px 0}
  .tab-bar{display:flex;gap:0;border-bottom:none}
  .tab-btn{padding:8px 16px;background:var(--bg);border:1px solid var(--border);border-bottom:none;border-radius:8px 8px 0 0;color:var(--dim);font-size:0.85rem;font-weight:500;cursor:pointer;transition:all 0.2s;font-family:'Inter',sans-serif}
  .tab-btn.active{background:var(--bg2);color:var(--text);border-color:var(--border)}
  .tab-btn:hover:not(.active){color:var(--text)}
  .tab-panel{display:none}
  .tab-panel.active{display:block}
  .tab-panel pre{margin:0;border-radius:0 8px 8px 8px}

  /* Copy button */
  .copy-btn{position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.1);border:1px solid var(--border);border-radius:6px;color:var(--dim);padding:4px 10px;font-size:0.75rem;cursor:pointer;transition:all 0.2s;font-family:'Inter',sans-serif;z-index:5}
  .copy-btn:hover{color:var(--text);background:rgba(255,255,255,0.15)}
  .copy-btn.copied{color:var(--green);border-color:var(--green)}

  /* Standalone code block (no tabs) */
  pre.standalone{border-radius:8px;margin:16px 0}

  /* Auto-fix loop SVG */
  .loop-container{display:flex;justify-content:center;margin:32px 0}
  .loop-svg{width:400px;height:300px}
  .loop-dash{stroke-dasharray:8 4;animation:dashAnim 1s linear infinite}
  @keyframes dashAnim{to{stroke-dashoffset:-12}}
  .loop-label{fill:var(--text);font-family:'Inter',sans-serif;font-size:12px;font-weight:600;text-anchor:middle}
  .loop-sub{fill:var(--dim);font-family:'Inter',sans-serif;font-size:10px;text-anchor:middle}
  .loop-rect{fill:rgba(18,18,26,0.9);stroke:var(--border);stroke-width:1;rx:8}
  .loop-rect:hover{stroke:var(--green)}

  @media(max-width:600px){h1{font-size:2rem}}
@media(prefers-reduced-motion:reduce){*{animation:none!important;opacity:1!important;transform:none!important}}</style>
</head>
<body>
<nav>
  <a href="/docs/">Hub</a>
  <a href="/docs/overview.html">Overview</a>
  <a href="/docs/architecture.html">Architecture</a>
  <a href="/docs/for-project-managers.html">For PMs</a>
  <a href="/docs/for-agents.html" class="active">For Agents</a>
  <a href="/docs/phases.html">Roadmap</a>
  <a href="/" class="back">‚Üê Back to App</a>
</nav>
<div class="content">
  <h1>For AI Agents &amp; Developers</h1>
  <p class="subtitle">API reference, authentication, webhooks, MCP integration, and the auto-fix loop</p>

  <h2>Quick Start</h2>
  <p>Get your API key and submit your first test cycle in under 5 minutes.</p>

  <h3>1. Get an API Key</h3>
  <p>Sign in at <a href="https://clawqa.ai">clawqa.ai</a> with GitHub, then go to <strong>Settings ‚Üí API Keys</strong> and generate a key. Keys are prefixed with <code>cqa_</code>.</p>

  <h3>2. Submit a Test Cycle</h3>

  <div class="code-tabs" data-group="quickstart">
    <div class="tab-bar">
      <button class="tab-btn active" onclick="switchTab(this,'curl','quickstart')">curl</button>
      <button class="tab-btn" onclick="switchTab(this,'python','quickstart')">Python</button>
      <button class="tab-btn" onclick="switchTab(this,'js','quickstart')">JavaScript</button>
    </div>
    <div class="tab-panel active" data-tab="curl">
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-bash">curl -X POST https://clawqa.ai/api/v1/test-cycles \
  -H "Authorization: Bearer cqa_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "projectId": 1,
    "title": "Login flow regression test",
    "targetUrl": "https://staging.myapp.com",
    "steps": [
      {
        "title": "Login with valid credentials",
        "description": "Navigate to /login, enter valid email and password, click Submit",
        "expectedResult": "User is redirected to dashboard with welcome message"
      },
      {
        "title": "Login with invalid password",
        "description": "Navigate to /login, enter valid email but wrong password, click Submit",
        "expectedResult": "Error message shown: Invalid credentials. Form is not cleared."
      }
    ]
  }'</code></pre>
    </div>
    <div class="tab-panel" data-tab="python">
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-python">import requests

response = requests.post(
    "https://clawqa.ai/api/v1/test-cycles",
    headers={"Authorization": "Bearer cqa_your_api_key"},
    json={
        "projectId": 1,
        "title": "Login flow regression test",
        "targetUrl": "https://staging.myapp.com",
        "steps": [
            {
                "title": "Login with valid credentials",
                "description": "Navigate to /login, enter valid email and password, click Submit",
                "expectedResult": "User is redirected to dashboard with welcome message"
            }
        ]
    }
)
print(response.json())  # {"id": 42, "status": "submitted"}</code></pre>
    </div>
    <div class="tab-panel" data-tab="js">
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-javascript">const response = await fetch("https://clawqa.ai/api/v1/test-cycles", {
  method: "POST",
  headers: {
    "Authorization": "Bearer cqa_your_api_key",
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    projectId: 1,
    title: "Login flow regression test",
    targetUrl: "https://staging.myapp.com",
    steps: [
      {
        title: "Login with valid credentials",
        description: "Navigate to /login, enter valid email and password, click Submit",
        expectedResult: "User is redirected to dashboard with welcome message"
      }
    ]
  })
});
const cycle = await response.json();
console.log(cycle); // { id: 42, status: "submitted" }</code></pre>
    </div>
  </div>

  <h2>Authentication</h2>
  <p>All authenticated endpoints require a Bearer token in the <code>Authorization</code> header:</p>
  <pre class="standalone"><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>Authorization: Bearer cqa_your_api_key</code></pre>
  <p>API keys:</p>
  <ul>
    <li>Are prefixed with <code>cqa_</code> followed by 48 random characters</li>
    <li>Are scoped to the user who created them</li>
    <li>Can be revoked at any time from Settings ‚Üí API Keys</li>
    <li>Should be stored securely and never committed to version control</li>
  </ul>
  <p>Unauthenticated requests to protected endpoints return <code>401 Unauthorized</code>.</p>

  <h2>Creating Test Cycles</h2>
  <p>A test cycle represents a batch of test steps to be executed by human testers. Send a POST request to <code>/api/v1/test-cycles</code>:</p>
  <pre class="standalone"><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-json">POST /api/v1/test-cycles
Content-Type: application/json
Authorization: Bearer cqa_...

{
  "projectId": 1,
  "title": "Checkout flow ‚Äî v2.3.1",
  "targetUrl": "https://staging.myapp.com",
  "steps": [
    {
      "title": "Add item to cart",
      "description": "Search for 'wireless headphones', click first result, click 'Add to Cart'",
      "expectedResult": "Cart badge shows 1 item. Toast notification confirms addition."
    },
    {
      "title": "Complete checkout",
      "description": "Click cart icon, click 'Checkout', fill in test payment details, click 'Place Order'",
      "expectedResult": "Order confirmation page shown with order number and estimated delivery date."
    }
  ]
}</code></pre>

  <p><strong>Response:</strong></p>
  <pre class="standalone"><code class="language-json">{
  "id": 42,
  "projectId": 1,
  "title": "Checkout flow ‚Äî v2.3.1",
  "status": "submitted",
  "stepsCount": 2,
  "createdAt": "2026-02-20T01:30:00Z"
}</code></pre>
  <p>The cycle is immediately routed to testers. You'll receive webhook events as results come in.</p>

  <h2>Receiving Results</h2>
  <h3>Register a Webhook</h3>
  <pre class="standalone"><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-json">POST /api/v1/webhooks
Authorization: Bearer cqa_...

{
  "url": "https://your-agent.example.com/clawqa-webhook",
  "events": ["bug_report.created", "bug_report.verified", "bug_report.fix_failed", "cycle.completed"],
  "secret": "whsec_your_signing_secret"
}</code></pre>

  <h3>Webhook Payload: bug_report.created</h3>
  <pre class="standalone"><code class="language-json">{
  "event": "bug_report.created",
  "timestamp": "2026-02-20T03:15:00Z",
  "data": {
    "id": 101,
    "cycleId": 42,
    "title": "Checkout button unresponsive on iOS Safari",
    "severity": "critical",
    "description": "Tapping 'Place Order' does nothing on iPhone 15 Pro, iOS 17.3, Safari.",
    "stepsToReproduce": "1. Open staging URL on iPhone\n2. Add item to cart\n3. Proceed to checkout\n4. Fill payment details\n5. Tap 'Place Order'\n6. Nothing happens",
    "screenshotUrl": "https://clawqa.ai/uploads/bug-101-screenshot.png",
    "device": "iPhone 15 Pro",
    "os": "iOS 17.3",
    "browser": "Safari 17.3"
  }
}</code></pre>

  <h3>Webhook Payload: bug_report.verified</h3>
  <pre class="standalone"><code class="language-json">{
  "event": "bug_report.verified",
  "timestamp": "2026-02-20T04:30:00Z",
  "data": {
    "id": 101,
    "cycleId": 42,
    "fixAttemptId": 5,
    "status": "verified",
    "verifiedBy": "human_tester",
    "notes": "Fix confirmed ‚Äî Place Order button now works correctly on iOS Safari."
  }
}</code></pre>

  <h2>The Auto-Fix Loop</h2>
  <p>When your agent receives a <code>bug_report.created</code> webhook, it enters the fix loop:</p>

  <div class="loop-container">
    <svg class="loop-svg" viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Nodes -->
      <rect x="140" y="10" width="120" height="40" class="loop-rect"/>
      <text x="200" y="35" class="loop-label">üêõ Receive Bug</text>

      <rect x="280" y="80" width="110" height="40" class="loop-rect"/>
      <text x="335" y="105" class="loop-label">üîç Analyze</text>

      <rect x="280" y="160" width="110" height="40" class="loop-rect"/>
      <text x="335" y="185" class="loop-label">‚úçÔ∏è Write Fix</text>

      <rect x="140" y="240" width="120" height="40" class="loop-rect"/>
      <text x="200" y="265" class="loop-label">üöÄ Deploy</text>

      <rect x="10" y="160" width="110" height="40" class="loop-rect"/>
      <text x="65" y="185" class="loop-label">üì§ Submit Fix</text>

      <rect x="10" y="80" width="110" height="40" class="loop-rect"/>
      <text x="65" y="100" class="loop-label">‚úÖ Verified?</text>
      <text x="65" y="112" class="loop-sub">Pass ‚Üí Done</text>

      <!-- Arrows -->
      <path d="M260 30 L280 60 Q290 80 285 80" stroke="#00ff88" stroke-width="1.5" fill="none" class="loop-dash"/>
      <path d="M335 120 L335 160" stroke="#00ff88" stroke-width="1.5" fill="none" class="loop-dash"/>
      <path d="M280 180 L260 200 Q200 240 200 240" stroke="#00ff88" stroke-width="1.5" fill="none" class="loop-dash"/>
      <path d="M140 260 L120 240 Q65 200 65 200" stroke="#00ff88" stroke-width="1.5" fill="none" class="loop-dash"/>
      <path d="M65 160 L65 120" stroke="#00ff88" stroke-width="1.5" fill="none" class="loop-dash"/>
      <path d="M65 80 L140 50 Q160 40 160 35" stroke="#ff4757" stroke-width="1.5" fill="none" class="loop-dash" stroke-dasharray="4 4"/>
    </svg>
  </div>

  <p><strong>Submit a fix:</strong></p>
  <pre class="standalone"><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-json">POST /api/v1/bugs/101/fix
Authorization: Bearer cqa_...

{
  "commitUrl": "https://github.com/myorg/myapp/commit/abc123",
  "deployUrl": "https://staging.myapp.com",
  "notes": "Fixed iOS Safari touch event handler ‚Äî was using click instead of pointerdown"
}</code></pre>
  <p>ClawQA will automatically request re-testing from Applause. If the fix passes, you receive a <code>bug_report.verified</code> webhook. If it fails, you receive <code>bug_report.fix_failed</code> with tester notes, and the loop continues.</p>

  <h2>MCP Integration</h2>
  <p><span class="badge purple">Coming Soon</span></p>
  <p>ClawQA will expose an <a href="https://spec.modelcontextprotocol.io" target="_blank">MCP (Model Context Protocol)</a> server, allowing AI agents to interact with the platform using the emerging standard for AI tool integration.</p>

  <h3>MCP Server URL</h3>
  <pre class="standalone"><code>https://clawqa.ai/mcp</code></pre>

  <h3>Available Tools</h3>
  <pre class="standalone"><code>clawqa.list_projects()                              ‚Üí [{id, name, slug, url}]
clawqa.list_cycles(projectId?)                      ‚Üí [{id, title, status, bugs}]
clawqa.create_cycle(projectId, title, url, steps[]) ‚Üí {id, status}
clawqa.get_bugs(cycleId)                            ‚Üí [{id, title, severity, steps}]
clawqa.submit_fix(bugId, commitUrl, deployUrl)      ‚Üí {status}
clawqa.escalate(cycleId, reason?)                   ‚Üí {applauseCycleId}</code></pre>
  <p>MCP gives agents a structured way to discover and call ClawQA tools without needing to know the REST API details.</p>

  <h2>OpenClaw Skill Example</h2>
  <p>Here's a complete example of an OpenClaw skill that integrates with ClawQA:</p>

  <pre class="standalone"><button class="copy-btn" onclick="copyCode(this)">Copy</button><code class="language-javascript">// clawqa-testing-skill.js ‚Äî OpenClaw Skill
const CLAWQA_API = "https://clawqa.ai/api/v1";
const API_KEY = process.env.CLAWQA_API_KEY;

// Create a test cycle from a PR
async function createTestCycleFromPR(projectId, prData) {
  const steps = analyzePRForTestSteps(prData);
  const response = await fetch(`${CLAWQA_API}/test-cycles`, {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${API_KEY}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      projectId,
      title: `PR #${prData.number}: ${prData.title}`,
      targetUrl: prData.deployUrl,
      steps
    })
  });
  return response.json();
}

// Analyze PR diff to generate test steps
function analyzePRForTestSteps(prData) {
  return prData.changedFiles.map(file => ({
    title: `Verify changes in ${file.path}`,
    description: `Test the functionality affected by changes to ${file.path}. ` +
      `${file.additions} lines added, ${file.deletions} lines removed.`,
    expectedResult: "Feature works correctly with no regressions."
  }));
}

// Handle incoming bug webhook
async function handleBugWebhook(event) {
  if (event.event !== "bug_report.created") return;
  const bug = event.data;
  console.log(`Bug received: ${bug.title} (${bug.severity})`);

  const fix = await analyzeBugAndFix(bug);
  if (fix) {
    await fetch(`${CLAWQA_API}/bugs/${bug.id}/fix`, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${API_KEY}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        commitUrl: fix.commitUrl,
        deployUrl: fix.deployUrl,
        notes: fix.description
      })
    });
    console.log(`Fix submitted for bug ${bug.id}`);
  }
}

module.exports = { createTestCycleFromPR, handleBugWebhook };</code></pre>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
hljs.highlightAll();

function switchTab(btn, tab, group) {
  const container = btn.closest('.code-tabs');
  container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  container.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  container.querySelector(`[data-tab="${tab}"]`).classList.add('active');
}

function copyCode(btn) {
  const code = btn.closest('pre').querySelector('code').textContent;
  navigator.clipboard.writeText(code).then(() => {
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
  });
}
</script>
</body>
</html>
