<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClawQA.AI â€” Developer Architecture</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a2e;--green:#00ff88;--blue:#4f8fff;--purple:#8b5cf6;--red:#ff4757;--yellow:#ffd700;--text:#e8e8f0;--dim:#8888a0;--border:#1e1e30}
  body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.7}
  nav{padding:16px 24px;border-bottom:1px solid var(--border);display:flex;gap:16px;flex-wrap:wrap;max-width:1100px;margin:0 auto}
  nav a{color:var(--dim);text-decoration:none;font-size:14px}nav a:hover{color:var(--text)}nav a.active{color:var(--text);font-weight:600}nav a.back{color:var(--green);margin-left:auto}
  .content{max-width:1000px;margin:0 auto;padding:40px 24px}
  h1{font-size:2.5rem;font-weight:700;margin-bottom:8px}
  h2{font-size:1.5rem;font-weight:600;margin:48px 0 16px;color:var(--green);border-bottom:1px solid var(--border);padding-bottom:8px}
  h3{font-size:1.1rem;font-weight:600;margin:24px 0 12px}
  p{margin-bottom:16px;color:var(--dim)}
  strong{color:var(--text)}
  a{color:var(--blue)}
  .subtitle{font-size:1.1rem;color:var(--dim);margin-bottom:32px}
  code{font-family:'JetBrains Mono',monospace;background:var(--bg2);padding:2px 6px;border-radius:4px;font-size:0.85em;color:var(--green)}
  pre{background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:16px;overflow-x:auto;margin:16px 0;font-size:0.85em}
  pre code{background:none;padding:0;color:var(--text)}
  ul,ol{margin:0 0 16px 24px;color:var(--dim)}
  li{margin-bottom:6px}

  /* Info cards */
  .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin:16px 0}
  .info-card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center}
  .info-card .val{font-size:1.8rem;font-weight:700;color:var(--green)}
  .info-card .label{font-size:0.8rem;color:var(--dim);margin-top:4px}

  /* File tree */
  .tree{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:20px;margin:16px 0;font-family:'JetBrains Mono',monospace;font-size:0.85em;line-height:1.8}
  .tree .folder{color:var(--blue);cursor:pointer}
  .tree .folder:hover{color:var(--green)}
  .tree .file{color:var(--dim)}
  .tree .comment{color:#555;font-style:italic}
  .tree details{margin-left:20px}
  .tree details>summary{list-style:none;cursor:pointer;color:var(--blue)}
  .tree details>summary::-webkit-details-marker{display:none}
  .tree details>summary::before{content:'ğŸ“ '}
  .tree details[open]>summary::before{content:'ğŸ“‚ '}
  .tree .f::before{content:'ğŸ“„ ';color:var(--dim)}
  .tree .f{color:var(--dim);margin-left:20px;display:block}

  /* API table */
  table{width:100%;border-collapse:collapse;margin:16px 0;font-size:0.85rem}
  th,td{text-align:left;padding:10px 12px;border-bottom:1px solid var(--border)}
  th{color:var(--green);font-weight:600;position:sticky;top:0;background:var(--bg)}
  td{color:var(--dim)}
  td code{font-size:0.8em}
  .method{font-weight:600;font-family:'JetBrains Mono',monospace;font-size:0.8em}
  .method.get{color:var(--blue)}.method.post{color:var(--green)}.method.put{color:var(--yellow)}.method.delete{color:var(--red)}
  .auth-badge{font-size:0.7rem;padding:2px 8px;border-radius:99px;font-weight:500}
  .auth-badge.key{background:rgba(0,255,136,0.1);color:var(--green)}
  .auth-badge.none{background:rgba(136,136,160,0.1);color:var(--dim)}
  .auth-badge.session{background:rgba(79,143,255,0.1);color:var(--blue)}

  /* ER diagram */
  .er-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin:16px 0}
  .er-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:14px;transition:all 0.3s}
  .er-card:hover{border-color:var(--green);transform:translateY(-2px)}
  .er-card h4{color:var(--text);font-size:0.9rem;margin-bottom:6px;display:flex;align-items:center;gap:6px}
  .er-card .fields{font-size:0.75rem;color:var(--dim);line-height:1.6}
  .er-card .rel{font-size:0.7rem;color:var(--blue);margin-top:6px;border-top:1px solid var(--border);padding-top:6px}

  /* Flow diagrams */
  .flow{display:flex;align-items:center;gap:0;margin:24px 0;overflow-x:auto;padding:16px 0}
  .flow-step{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:12px 16px;text-align:center;min-width:120px;flex-shrink:0;transition:all 0.3s}
  .flow-step:hover{border-color:var(--green);transform:scale(1.05)}
  .flow-step .icon{font-size:1.5rem;margin-bottom:4px}
  .flow-step .name{font-size:0.8rem;font-weight:600;color:var(--text)}
  .flow-step .desc{font-size:0.7rem;color:var(--dim);margin-top:2px}
  .flow-arrow{color:var(--green);font-size:1.2rem;flex-shrink:0;padding:0 4px}

  /* Matrix */
  .matrix{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:16px 0}
  .matrix-col{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:20px}
  .matrix-col h3{font-size:1rem;margin:0 0 12px}
  .matrix-col.ai h3{color:var(--green)}
  .matrix-col.human h3{color:var(--blue)}
  .matrix-col ul{margin:0;padding:0;list-style:none}
  .matrix-col li{padding:6px 0;border-bottom:1px solid rgba(30,30,48,0.5);font-size:0.85rem;color:var(--dim)}
  .matrix-col li::before{content:'âœ“ ';color:var(--green)}
  .matrix-col.human li::before{content:'ğŸ‘¤ ';color:var(--blue)}

  /* Test coverage */
  .test-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin:16px 0}
  .test-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:14px}
  .test-card h4{font-size:0.85rem;color:var(--text);margin-bottom:6px}
  .test-card .count{color:var(--green);font-weight:600}
  .test-card p{font-size:0.75rem;margin:0;color:var(--dim)}

  @media(max-width:768px){
    .matrix{grid-template-columns:1fr}
    .flow{flex-direction:column}
    .flow-arrow{transform:rotate(90deg)}
    .info-grid{grid-template-columns:repeat(2,1fr)}
  }
</style>
</head>
<body>
<nav>
  <a href="/docs/">Hub</a>
  <a href="/docs/overview.html">Overview</a>
  <a href="/docs/architecture.html" class="active">Architecture</a>
  <a href="/docs/for-project-managers.html">For PMs</a>
  <a href="/docs/for-agents.html">For Agents</a>
  <a href="/docs/phases.html">Roadmap</a>
  <a href="/" class="back">â† Back to App</a>
</nav>
<div class="content">
  <h1>Developer Architecture</h1>
  <p class="subtitle">Complete technical reference â€” v1.0.0</p>

  <!-- Stats -->
  <div class="info-grid">
    <div class="info-card"><div class="val">38</div><div class="label">API Routes</div></div>
    <div class="info-card"><div class="val">18</div><div class="label">DB Models</div></div>
    <div class="info-card"><div class="val">16</div><div class="label">Dashboard Pages</div></div>
    <div class="info-card"><div class="val">8</div><div class="label">Core Libraries</div></div>
    <div class="info-card"><div class="val">85</div><div class="label">Tests (58+27)</div></div>
    <div class="info-card"><div class="val">6</div><div class="label">MCP Tools</div></div>
  </div>

  <h2>System Overview</h2>
  <div class="flow">
    <div class="flow-step"><div class="icon">ğŸ‘¤</div><div class="name">Browser</div><div class="desc">GitHub OAuth / Password</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸŒ</div><div class="name">Caddy</div><div class="desc">TLS + Reverse Proxy</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">âš¡</div><div class="name">Next.js 16</div><div class="desc">PM2 :3150</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ’¾</div><div class="name">SQLite</div><div class="desc">Prisma ORM</div></div>
    <div class="flow-arrow">â†”</div>
    <div class="flow-step"><div class="icon">ğŸ§ª</div><div class="name">Applause</div><div class="desc">Crowd Testing</div></div>
  </div>
  <ul>
    <li><strong>Server:</strong> Hetzner 135.181.43.68 Â· Ubuntu Â· PM2 process manager</li>
    <li><strong>Framework:</strong> Next.js 16.1.6 (App Router) Â· React 19 Â· TypeScript</li>
    <li><strong>Auth:</strong> NextAuth v5 â€” GitHub OAuth + Credentials (demo password)</li>
    <li><strong>Database:</strong> SQLite via Prisma 6.19.2 â€” 18 models</li>
    <li><strong>Repo:</strong> <a href="https://github.com/yoniassia/clawqa">github.com/yoniassia/clawqa</a> Â· Tag: v1.0.0</li>
  </ul>

  <h2>File Architecture</h2>
  <div class="tree">
    <details open>
      <summary>src/</summary>
      <details open>
        <summary>app/</summary>
        <details>
          <summary>(auth)/</summary>
          <span class="f">login/page.tsx <span class="comment">â€” GitHub OAuth + password login</span></span>
        </details>
        <details open>
          <summary>(dashboard)/ <span class="comment">â€” Protected route group</span></summary>
          <span class="f">layout.tsx <span class="comment">â€” Sidebar navigation layout</span></span>
          <details>
            <summary>dashboard/</summary>
            <span class="f">page.tsx <span class="comment">â€” Main dashboard with project cards</span></span>
            <span class="f">test-cycles/page.tsx <span class="comment">â€” List all test cycles</span></span>
            <span class="f">test-cycles/[id]/page.tsx <span class="comment">â€” Cycle detail + steps + bugs</span></span>
            <span class="f">bugs/page.tsx <span class="comment">â€” All bug reports</span></span>
            <span class="f">analytics/page.tsx <span class="comment">â€” Charts, severity, trends</span></span>
            <span class="f">test-plans/page.tsx <span class="comment">â€” Reusable test plan templates</span></span>
            <span class="f">test-plans/[id]/page.tsx <span class="comment">â€” Plan detail + execute</span></span>
            <span class="f">webhooks/page.tsx <span class="comment">â€” Webhook management + delivery logs</span></span>
            <span class="f">browse-tests/page.tsx <span class="comment">â€” Testers browse available tests</span></span>
            <span class="f">my-tests/page.tsx <span class="comment">â€” Tester's claimed tests</span></span>
            <span class="f">my-tests/[id]/page.tsx <span class="comment">â€” Test execution UI</span></span>
            <span class="f">my-bugs/page.tsx <span class="comment">â€” Bugs I reported</span></span>
          </details>
          <span class="f">api-keys/page.tsx <span class="comment">â€” Generate/revoke API keys</span></span>
          <span class="f">projects/[slug]/page.tsx <span class="comment">â€” Project detail</span></span>
          <span class="f">settings/page.tsx <span class="comment">â€” Applause config + connection test</span></span>
        </details>
        <details open>
          <summary>api/ <span class="comment">â€” 38 API routes</span></summary>
          <span class="f">auth/[...nextauth]/route.ts <span class="comment">â€” NextAuth handlers</span></span>
          <span class="f">mcp/route.ts <span class="comment">â€” MCP JSON-RPC server</span></span>
          <span class="f">api-keys/route.ts <span class="comment">â€” Key management</span></span>
          <span class="f">me/route.ts <span class="comment">â€” Current user info</span></span>
          <details>
            <summary>v1/ <span class="comment">â€” Public REST API</span></summary>
            <span class="f">projects/route.ts <span class="comment">â€” GET/POST projects</span></span>
            <span class="f">projects/[slug]/route.ts <span class="comment">â€” Project detail</span></span>
            <span class="f">projects/[slug]/agents/route.ts <span class="comment">â€” Assign/list agents</span></span>
            <span class="f">projects/[slug]/agents/[userId]/route.ts <span class="comment">â€” Remove agent</span></span>
            <span class="f">test-cycles/route.ts <span class="comment">â€” GET/POST cycles</span></span>
            <span class="f">test-cycles/[id]/route.ts <span class="comment">â€” Cycle detail</span></span>
            <span class="f">test-cycles/[id]/bugs/route.ts <span class="comment">â€” Bugs per cycle</span></span>
            <span class="f">test-plans/route.ts <span class="comment">â€” GET/POST plans</span></span>
            <span class="f">test-plans/[id]/route.ts <span class="comment">â€” Plan detail</span></span>
            <span class="f">test-plans/[id]/execute/route.ts <span class="comment">â€” Instantiate plan â†’ cycle</span></span>
            <span class="f">bugs/route.ts <span class="comment">â€” GET/POST bugs</span></span>
            <span class="f">bugs/[id]/fix/route.ts <span class="comment">â€” Submit fix attempt</span></span>
            <span class="f">auto-fix/trigger/route.ts <span class="comment">â€” Start auto-fix job</span></span>
            <span class="f">auto-fix/[attemptId]/status/route.ts <span class="comment">â€” Job progress</span></span>
            <span class="f">auto-fix/[attemptId]/complete/route.ts <span class="comment">â€” Mark fix done</span></span>
            <span class="f">analytics/route.ts <span class="comment">â€” Bug stats & trends</span></span>
            <span class="f">webhooks/route.ts <span class="comment">â€” Register/list webhooks</span></span>
            <span class="f">webhooks/test/route.ts <span class="comment">â€” Send test ping</span></span>
            <span class="f">webhooks/[id]/deliveries/route.ts <span class="comment">â€” Delivery history</span></span>
            <span class="f">escalate/route.ts <span class="comment">â€” Send to Applause</span></span>
            <span class="f">escalation-rules/route.ts <span class="comment">â€” Priority routing rules</span></span>
            <span class="f">github/connect/route.ts <span class="comment">â€” Link repo to project</span></span>
            <span class="f">github/webhook/route.ts <span class="comment">â€” Receive PR events</span></span>
            <span class="f">github/prs/[prNumber]/status/route.ts <span class="comment">â€” Test status for PR</span></span>
            <span class="f">applause/status/route.ts <span class="comment">â€” Connection check</span></span>
            <span class="f">applause/results/route.ts <span class="comment">â€” Sync test results</span></span>
            <span class="f">applause/webhook/route.ts <span class="comment">â€” Receive Applause events</span></span>
          </details>
        </details>
        <span class="f">developers/page.tsx <span class="comment">â€” Public API docs portal</span></span>
        <span class="f">layout.tsx <span class="comment">â€” Root layout</span></span>
        <span class="f">page.tsx <span class="comment">â€” Homepage</span></span>
      </details>
      <details>
        <summary>lib/ <span class="comment">â€” 8 core modules</span></summary>
        <span class="f">auth.ts <span class="comment">â€” NextAuth config (GitHub + Credentials)</span></span>
        <span class="f">prisma.ts <span class="comment">â€” Prisma client singleton</span></span>
        <span class="f">api-auth.ts <span class="comment">â€” API key validation (SHA-256 hash)</span></span>
        <span class="f">applause.ts <span class="comment">â€” Applause SDK (startTestRun, submitResult...)</span></span>
        <span class="f">webhook-dispatcher.ts <span class="comment">â€” HMAC-SHA256 signed delivery + retries</span></span>
        <span class="f">rate-limit.ts <span class="comment">â€” Sliding window (100 req/min per key)</span></span>
        <span class="f">priority-scoring.ts <span class="comment">â€” Bug priority calculation</span></span>
        <span class="f">escalation-engine.ts <span class="comment">â€” Rule-based escalation matching</span></span>
      </details>
      <details>
        <summary>components/</summary>
        <span class="f">GlassCard.tsx <span class="comment">â€” Glassmorphism card component</span></span>
        <span class="f">Sidebar.tsx <span class="comment">â€” Dashboard sidebar nav</span></span>
        <span class="f">TopBar.tsx <span class="comment">â€” Top navigation bar</span></span>
      </details>
    </details>
    <details>
      <summary>tests/ <span class="comment">â€” 85 tests total</span></summary>
      <details>
        <summary>unit/ <span class="comment">â€” 58 tests (Vitest)</span></summary>
        <span class="f">api-auth.test.ts <span class="comment">â€” 4 tests: key validation, hashing</span></span>
        <span class="f">api-bugs.test.ts <span class="comment">â€” 2 tests: bug CRUD</span></span>
        <span class="f">api-projects.test.ts <span class="comment">â€” 3 tests: project data</span></span>
        <span class="f">api-test-cycles.test.ts <span class="comment">â€” 5 tests: cycle data, steps JSON</span></span>
        <span class="f">applause-client.test.ts <span class="comment">â€” 10 tests: SDK methods, config</span></span>
        <span class="f">escalation-rules.test.ts <span class="comment">â€” 2 tests: rule matching</span></span>
        <span class="f">mcp-tools.test.ts <span class="comment">â€” 3 tests: tool definitions</span></span>
        <span class="f">phases456.test.ts <span class="comment">â€” 9 tests: auto-fix, webhooks, applause</span></span>
        <span class="f">phases-7-10.test.ts <span class="comment">â€” 8 tests: plans, analytics, agents, github</span></span>
        <span class="f">priority-scoring.test.ts <span class="comment">â€” 6 tests: score calculation</span></span>
        <span class="f">rate-limit.test.ts <span class="comment">â€” 3 tests: sliding window</span></span>
        <span class="f">schema.test.ts <span class="comment">â€” 1 test: Prisma schema validity</span></span>
        <span class="f">webhook-dispatcher.test.ts <span class="comment">â€” 2 tests: HMAC signing</span></span>
      </details>
      <details>
        <summary>e2e/ <span class="comment">â€” 27 tests (Playwright)</span></summary>
        <span class="f">homepage.spec.ts <span class="comment">â€” 5 tests: title, nav, projects, docs, CTA</span></span>
        <span class="f">docs.spec.ts <span class="comment">â€” 7 tests: all doc pages load + links</span></span>
        <span class="f">api.spec.ts <span class="comment">â€” 8 tests: API endpoints return correct data</span></span>
        <span class="f">auth.spec.ts <span class="comment">â€” 4 tests: login redirect, protection</span></span>
        <span class="f">webhooks.spec.ts <span class="comment">â€” 3 tests: webhook registration</span></span>
      </details>
    </details>
    <details>
      <summary>prisma/</summary>
      <span class="f">schema.prisma <span class="comment">â€” 18 models, 264 lines</span></span>
      <span class="f">dev.db <span class="comment">â€” SQLite database</span></span>
    </details>
    <details>
      <summary>public/docs/ <span class="comment">â€” Static documentation</span></summary>
      <span class="f">index.html, overview.html, architecture.html, phases.html, for-agents.html, for-project-managers.html</span>
    </details>
  </div>

  <h2>Database Schema (18 Models)</h2>
  <p>Hover over any model to see its relationships.</p>
  <div class="er-grid">
    <div class="er-card" data-rels="Account,Session,ApiKey,TesterProfile,Project,TestExecution,BugReport,Webhook"><h4>ğŸ‘¤ User</h4><div class="fields">id, name, email, role, image, createdAt</div><div class="rel">â†’ Account, Session, ApiKey, Project, Webhook, TestExecution, BugReport, TesterProfile</div></div>
    <div class="er-card"><h4>ğŸ”‘ Account</h4><div class="fields">provider, providerAccountId, access_token, refresh_token</div><div class="rel">â†’ User</div></div>
    <div class="er-card"><h4>ğŸ« Session</h4><div class="fields">sessionToken, expires</div><div class="rel">â†’ User</div></div>
    <div class="er-card"><h4>ğŸ” ApiKey</h4><div class="fields">keyHash (SHA-256), keyPrefix, name, lastUsedAt, revokedAt</div><div class="rel">â†’ User</div></div>
    <div class="er-card"><h4>ğŸ§‘â€ğŸ’» TesterProfile</h4><div class="fields">devices[], languages[], country, bio</div><div class="rel">â†’ User (1:1)</div></div>
    <div class="er-card" data-rels="TestCycle,AgentAssignment,EscalationRule"><h4>ğŸ“ Project</h4><div class="fields">name, slug, description, targetUrl, repoUrl, githubOwner, githubRepo, autoFixEnabled</div><div class="rel">â†’ User (owner), TestCycle[], AgentAssignment[], EscalationRule[]</div></div>
    <div class="er-card" data-rels="BugReport,TestExecution"><h4>ğŸ”„ TestCycle</h4><div class="fields">title, description, targetUrl, priority, status, stepsJson, deviceReqs, prUrl, prNumber</div><div class="rel">â†’ Project, BugReport[], TestExecution[]</div></div>
    <div class="er-card"><h4>â–¶ï¸ TestExecution</h4><div class="fields">status, startedAt, completedAt, resultsJson</div><div class="rel">â†’ TestCycle, User (tester)</div></div>
    <div class="er-card" data-rels="FixAttempt"><h4>ğŸ› BugReport</h4><div class="fields">title, severity, status, stepsToReproduce, expectedResult, actualResult, deviceInfo, screenshotUrls</div><div class="rel">â†’ TestCycle, User (reporter), FixAttempt[]</div></div>
    <div class="er-card"><h4>ğŸ”§ FixAttempt</h4><div class="fields">commitUrl, deployUrl, notes, status</div><div class="rel">â†’ BugReport</div></div>
    <div class="er-card" data-rels="WebhookDelivery"><h4>ğŸ”” Webhook</h4><div class="fields">url, events[], secret (HMAC), active</div><div class="rel">â†’ User, WebhookDelivery[]</div></div>
    <div class="er-card"><h4>ğŸ“¬ WebhookDelivery</h4><div class="fields">event, payload, statusCode, responseBody, duration, deliveredAt</div><div class="rel">â†’ Webhook</div></div>
    <div class="er-card"><h4>ğŸ¤– AutoFixJob</h4><div class="fields">status (queuedâ†’analyzingâ†’fixingâ†’deployingâ†’retestingâ†’verified/failed), webhookPayload, retryCount</div><div class="rel">â†’ BugReport, FixAttempt</div></div>
    <div class="er-card"><h4>ğŸ“‹ TestPlan</h4><div class="fields">title, description, stepsJson, deviceReqs, browserReqs, priority, version</div><div class="rel">â†’ Project, User, TestPlanHistory[]</div></div>
    <div class="er-card"><h4>ğŸ“œ TestPlanHistory</h4><div class="fields">version, stepsJson, changedAt</div><div class="rel">â†’ TestPlan</div></div>
    <div class="er-card"><h4>ğŸ¤ AgentAssignment</h4><div class="fields">role (owner/contributor/viewer), permissions</div><div class="rel">â†’ Project, User</div></div>
    <div class="er-card"><h4>ğŸš¨ EscalationRule</h4><div class="fields">condition (JSON), action (notify/escalate/block-release), targetUrl</div><div class="rel">â†’ Project</div></div>
    <div class="er-card"><h4>âœ… VerificationToken</h4><div class="fields">identifier, token, expires</div><div class="rel">(standalone)</div></div>
  </div>

  <h2>API Endpoint Map (38 Routes)</h2>

  <h3>Projects & Agents</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/projects</code></td><td><span class="auth-badge none">None</span></td><td>List all projects</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/projects</code></td><td><span class="auth-badge key">API Key</span></td><td>Create project</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/projects/:slug</code></td><td><span class="auth-badge none">None</span></td><td>Project detail</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/projects/:slug/agents</code></td><td><span class="auth-badge key">API Key</span></td><td>List assigned agents</td></tr>
    <tr><td><span class="method put">PUT</span></td><td><code>/api/v1/projects/:slug/agents</code></td><td><span class="auth-badge key">API Key</span></td><td>Assign agent to project</td></tr>
    <tr><td><span class="method delete">DEL</span></td><td><code>/api/v1/projects/:slug/agents/:userId</code></td><td><span class="auth-badge key">API Key</span></td><td>Remove agent</td></tr>
  </table>

  <h3>Test Cycles & Plans</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/test-cycles</code></td><td><span class="auth-badge none">None</span></td><td>List all cycles</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/test-cycles</code></td><td><span class="auth-badge key">API Key</span></td><td>Create test cycle</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/test-cycles/:id</code></td><td><span class="auth-badge none">None</span></td><td>Cycle detail</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/test-cycles/:id/bugs</code></td><td><span class="auth-badge none">None</span></td><td>Bugs for cycle</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/test-plans</code></td><td><span class="auth-badge none">None</span></td><td>List test plans</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/test-plans</code></td><td><span class="auth-badge key">API Key</span></td><td>Create test plan</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/test-plans/:id</code></td><td><span class="auth-badge none">None</span></td><td>Plan detail</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/test-plans/:id/execute</code></td><td><span class="auth-badge key">API Key</span></td><td>Create cycle from plan</td></tr>
  </table>

  <h3>Bugs & Auto-Fix</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/bugs</code></td><td><span class="auth-badge none">None</span></td><td>List bug reports</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/bugs</code></td><td><span class="auth-badge key">API Key</span></td><td>Create bug report</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/bugs/:id/fix</code></td><td><span class="auth-badge key">API Key</span></td><td>Submit fix attempt</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/auto-fix/trigger</code></td><td><span class="auth-badge key">API Key</span></td><td>Start auto-fix job</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/auto-fix/:id/status</code></td><td><span class="auth-badge key">API Key</span></td><td>Job progress</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/auto-fix/:id/complete</code></td><td><span class="auth-badge key">API Key</span></td><td>Mark fix deployed</td></tr>
  </table>

  <h3>Webhooks & Analytics</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/webhooks</code></td><td><span class="auth-badge key">API Key</span></td><td>List webhooks</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/webhooks</code></td><td><span class="auth-badge key">API Key</span></td><td>Register webhook</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/webhooks/test</code></td><td><span class="auth-badge key">API Key</span></td><td>Send test ping</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/webhooks/:id/deliveries</code></td><td><span class="auth-badge key">API Key</span></td><td>Delivery history</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/analytics</code></td><td><span class="auth-badge none">None</span></td><td>Bug stats & trends</td></tr>
  </table>

  <h3>Escalation, GitHub & Applause</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/escalate</code></td><td><span class="auth-badge key">API Key</span></td><td>Escalate cycle to Applause</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/escalation-rules</code></td><td><span class="auth-badge key">API Key</span></td><td>List escalation rules</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/escalation-rules</code></td><td><span class="auth-badge key">API Key</span></td><td>Create rule</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/github/connect</code></td><td><span class="auth-badge key">API Key</span></td><td>Link repo to project</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/github/webhook</code></td><td><span class="auth-badge none">GitHub</span></td><td>Receive PR events</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/github/prs/:num/status</code></td><td><span class="auth-badge none">None</span></td><td>Test status for PR</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/v1/applause/status</code></td><td><span class="auth-badge none">None</span></td><td>Connection check</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/applause/results</code></td><td><span class="auth-badge key">API Key</span></td><td>Sync test results</td></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/v1/applause/webhook</code></td><td><span class="auth-badge none">Applause</span></td><td>Receive results</td></tr>
  </table>

  <h3>MCP & Internal</h3>
  <table>
    <tr><th>Method</th><th>Path</th><th>Auth</th><th>Description</th></tr>
    <tr><td><span class="method post">POST</span></td><td><code>/api/mcp</code></td><td><span class="auth-badge key">API Key</span></td><td>MCP JSON-RPC â€” 6 tools: list_projects, list_cycles, create_cycle, get_bugs, submit_fix, escalate</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/api-keys</code></td><td><span class="auth-badge session">Session</span></td><td>Manage API keys</td></tr>
    <tr><td><span class="method get">GET</span></td><td><code>/api/me</code></td><td><span class="auth-badge session">Session</span></td><td>Current user info</td></tr>
  </table>

  <h2>Data Flows</h2>

  <h3>1. Test Cycle Lifecycle</h3>
  <div class="flow">
    <div class="flow-step"><div class="icon">ğŸ¤–</div><div class="name">AI Agent</div><div class="desc">POST /test-cycles</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ“‹</div><div class="name">Created</div><div class="desc">Steps stored in DB</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸš€</div><div class="name">Escalate</div><div class="desc">POST /escalate</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ§ª</div><div class="name">Applause</div><div class="desc">Humans test</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ›</div><div class="name">Bugs</div><div class="desc">Webhook callback</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ”§</div><div class="name">Auto-Fix</div><div class="desc">AI writes fix</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">âœ…</div><div class="name">Verified</div><div class="desc">Re-tested & passed</div></div>
  </div>

  <h3>2. Auto-Fix Loop</h3>
  <div class="flow">
    <div class="flow-step"><div class="icon">ğŸ“©</div><div class="name">Bug Webhook</div><div class="desc">bug_report.created</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ”</div><div class="name">Analyze</div><div class="desc">Read bug details</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">âœï¸</div><div class="name">Fix Code</div><div class="desc">Write & commit</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸš¢</div><div class="name">Deploy</div><div class="desc">Push to staging</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ“¤</div><div class="name">Submit Fix</div><div class="desc">POST /bugs/:id/fix</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ§ª</div><div class="name">Re-test</div><div class="desc">Applause verifies</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">âœ…âŒ</div><div class="name">Result</div><div class="desc">Verified or retry</div></div>
  </div>

  <h3>3. MCP Tool Call</h3>
  <div class="flow">
    <div class="flow-step"><div class="icon">ğŸ¤–</div><div class="name">AI Agent</div><div class="desc">MCP client</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ”Œ</div><div class="name">Initialize</div><div class="desc">Get capabilities</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ“œ</div><div class="name">tools/list</div><div class="desc">Discover 6 tools</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">âš¡</div><div class="name">tools/call</div><div class="desc">Execute tool</div></div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step"><div class="icon">ğŸ“¦</div><div class="name">Result</div><div class="desc">Structured JSON</div></div>
  </div>

  <h2>Test Coverage</h2>
  <div class="info-grid">
    <div class="info-card"><div class="val">58</div><div class="label">Unit Tests (Vitest)</div></div>
    <div class="info-card"><div class="val">27</div><div class="label">E2E Tests (Playwright)</div></div>
    <div class="info-card"><div class="val">13</div><div class="label">Unit Test Files</div></div>
    <div class="info-card"><div class="val">5</div><div class="label">E2E Spec Files</div></div>
  </div>
  <div class="test-grid">
    <div class="test-card"><h4>api-auth.test.ts</h4><p><span class="count">4 tests</span> â€” API key validation, SHA-256 hashing, revoked key rejection</p></div>
    <div class="test-card"><h4>api-bugs.test.ts</h4><p><span class="count">2 tests</span> â€” Bug report CRUD operations</p></div>
    <div class="test-card"><h4>api-projects.test.ts</h4><p><span class="count">3 tests</span> â€” Project listing, slug lookup, data integrity</p></div>
    <div class="test-card"><h4>api-test-cycles.test.ts</h4><p><span class="count">5 tests</span> â€” Cycle count, steps JSON parsing, priority validation</p></div>
    <div class="test-card"><h4>applause-client.test.ts</h4><p><span class="count">10 tests</span> â€” SDK methods, configured/unconfigured states, status values</p></div>
    <div class="test-card"><h4>escalation-rules.test.ts</h4><p><span class="count">2 tests</span> â€” Rule condition matching, action execution</p></div>
    <div class="test-card"><h4>mcp-tools.test.ts</h4><p><span class="count">3 tests</span> â€” Tool definitions, schemas, protocol compliance</p></div>
    <div class="test-card"><h4>phases456.test.ts</h4><p><span class="count">9 tests</span> â€” Auto-fix jobs, webhook delivery, Applause integration</p></div>
    <div class="test-card"><h4>phases-7-10.test.ts</h4><p><span class="count">8 tests</span> â€” Test plans, analytics, agent assignments, GitHub</p></div>
    <div class="test-card"><h4>priority-scoring.test.ts</h4><p><span class="count">6 tests</span> â€” Score calculation, severity weighting</p></div>
    <div class="test-card"><h4>rate-limit.test.ts</h4><p><span class="count">3 tests</span> â€” Sliding window, 429 responses, key isolation</p></div>
    <div class="test-card"><h4>schema.test.ts</h4><p><span class="count">1 test</span> â€” Prisma schema validity, 18 models present</p></div>
    <div class="test-card"><h4>webhook-dispatcher.test.ts</h4><p><span class="count">2 tests</span> â€” HMAC-SHA256 signing, header format</p></div>
  </div>

  <h2>AI vs Human Testing Matrix</h2>
  <p>What ClawQA's AI can verify automatically vs what must be escalated to Applause's human testers.</p>
  <div class="matrix">
    <div class="matrix-col ai">
      <h3>ğŸ¤– AI Can Test (Automated)</h3>
      <ul>
        <li>API endpoint responses (status codes, JSON shape)</li>
        <li>Authentication flows (Playwright headless)</li>
        <li>Database CRUD operations</li>
        <li>Webhook delivery & HMAC signatures</li>
        <li>MCP JSON-RPC protocol compliance</li>
        <li>Rate limiting (429 responses)</li>
        <li>Priority scoring calculations</li>
        <li>Escalation rule matching</li>
        <li>Test plan versioning logic</li>
        <li>API key generation & revocation</li>
        <li>Data validation & error handling</li>
        <li>Redirect chains (/docs â†’ /docs/)</li>
      </ul>
    </div>
    <div class="matrix-col human">
      <h3>ğŸ‘¤ Humans Must Test (Applause)</h3>
      <ul>
        <li>Real GitHub OAuth on phones (iOS Safari, Android Chrome)</li>
        <li>Cross-browser visual rendering (glassmorphism, backdrop-blur)</li>
        <li>Touch interactions (mobile nav hamburger, tap targets)</li>
        <li>Real device performance (slow phones, tablets, 3G)</li>
        <li>Accessibility (VoiceOver, TalkBack, screen readers)</li>
        <li>Visual regressions (does it actually look right?)</li>
        <li>Animated SVG diagrams across browsers</li>
        <li>Copy-to-clipboard in code blocks</li>
        <li>Password login UX (error states, loading)</li>
        <li>Dashboard layout on small tablets</li>
        <li>Telegram bot real-device interaction (Clawdet)</li>
        <li>Concurrent multi-user scenarios</li>
      </ul>
    </div>
  </div>

  <h2>Infrastructure</h2>
  <pre><code>Server:     Hetzner 135.181.43.68 (Ubuntu)
Process:    PM2 â†’ clawqa-nextjs (port 3150)
Proxy:      Caddy â†’ TLS + gzip + reverse proxy
Database:   SQLite â†’ /var/www/clawqa-nextjs/prisma/dev.db
Docs:       Static HTML â†’ /var/www/clawqa-nextjs/public/docs/
Domain:     clawqa.ai (Caddy auto-TLS)
Repo:       github.com/yoniassia/clawqa (v1.0.0)
CI:         Manual (npm test + npx playwright test)
Monitoring: PM2 logs + Caddy access logs</code></pre>

</div>
<script>hljs.highlightAll();</script>
</body>
</html>
